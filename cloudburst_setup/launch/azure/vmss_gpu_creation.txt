#!/bin/bash

export AZ_SSH="ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDIi6sHuPqcx4J0pLiXSnLGRSlnILReeaff9gGCm0zKiqHVeZ6RPo2gbYKDBzVgDJcqOftjp/Mcg30YIDX1ei42W2WRHx/ewuK+09qejjAuo389ySByS6mI/emu2HhdvYMb07nhycdyK45xXYM6wla6hfQIrNccAKfPCWGdlc/FNxW5ffBFrm7AM9yMCXc95XkuRBto1oaySTYEr3FGYw2U8FfRmmnL/U7xI7zKR4OeWRn8KlaQyABybQ8h5a6T6ISjxmUoSL1MIWPlfNuxZ5djEoCIrtuhPeXW5dxlPrJCdSiBHQcAhsqQD1oyCIz60QCj9xJOjdx4ENXqlkFLPBw9 isfiligoi@wireless-169-228-82-29.ucsd.edu"

export AZ_SUB=/subscriptions/1b46e70e-9c7a-463d-8bce-6450c0cd15a3/resourceGroups/exa/providers/Microsoft

export AZ_STD_ARGS="--admin-username centos --authentication-type ssh --ssh-key-values \"${AZ_SSH}\"
                   --priority low --public-ip-per-vm --upgrade-policy-mode manual --lb \"\"
                   --disable-overprovision --eviction-policy delete --max-billing -1
                   --assign-identity ${AZ_SUB}.ManagedIdentity/userAssignedIdentities/blob-writer
                   --image ${AZ_SUB}.Compute/galleries/galery_uswest2/images/wn-wgpu-v7"

for n in 1 2 3 4 5; do
  if [ $n -eq 1 ]; then
   nstr=""
  else
   nstr="-i${n}"
  fi

  #eastus


  eval az vmss create --resource-group exa --name exav7nvuseast1${nstr} \
               --location eastus \
               --vm-sku "Standard_NV6" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/us-east1-all-in \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-us-east1-64k/subnets/subnet-us-east1-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  eval az vmss create --resource-group exa --name exav7nv3useast1${nstr} \
               --location eastus \
               --vm-sku "Standard_NV12s_v3" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/us-east1-all-in \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-us-east1-64k/subnets/subnet-us-east1-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  eval az vmss create --resource-group exa --name exav7nduseast1${nstr} \
               --location eastus \
               --vm-sku "Standard_ND6s" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/us-east1-all-in \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-us-east1-64k/subnets/subnet-us-east1-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  eval az vmss create --resource-group exa --name exav7ncuseast1${nstr} \
               --location eastus \
               --vm-sku "Standard_NC6" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/us-east1-all-in \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-us-east1-64k/subnets/subnet-us-east1-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0 # no zones


  eval az vmss create --resource-group exa --name exav7nc2useast1${nstr} \
               --location eastus \
               --vm-sku "Standard_NC6s_v2" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/us-east1-all-in \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-us-east1-64k/subnets/subnet-us-east1-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  # quota around 30?
  eval az vmss create --resource-group exa --name exav7nc3useast1${nstr} \
               --location eastus \
               --vm-sku "Standard_NC6s_v3" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/us-east1-all-in \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-us-east1-64k/subnets/subnet-us-east1-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0 # no zones


  # westus2
  eval az vmss create --resource-group exa --name exav7ncuswest2${nstr} \
               --location westus2 \
               --vm-sku "Standard_NC6" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/us-west2-all-in \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-us-west2-64k/subnets/subnet-us-west2-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0 # nozones

  eval az vmss create --resource-group exa --name exav7nc2uswest2${nstr} \
               --location westus2 \
               --vm-sku "Standard_NC6s_v2" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/us-west2-all-in \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-us-west2-64k/subnets/subnet-us-west2-64k \
               --single-placement-group false  \
               ${AZ_STD_ARGS} --instance-count 0 # nozones

  eval az vmss create --resource-group exa --name exav7nc3uswest2${nstr} \
               --location westus2 \
               --vm-sku "Standard_NC6s_v3" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/us-west2-all-in \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-us-west2-64k/subnets/subnet-us-west2-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0 # nozones

  eval az vmss create --resource-group exa --name exav7nvuswest2${nstr} \
               --location westus2 \
               --vm-sku "Standard_NV6" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/us-west2-all-in \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-us-west2-64k/subnets/subnet-us-west2-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0 # nozones

  eval az vmss create --resource-group exa --name exav7nduswest2${nstr} \
               --location westus2 \
               --vm-sku "Standard_ND6s" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/us-west2-all-in \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-us-west2-64k/subnets/subnet-us-west2-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0 # nozones


  # southcentralus

  eval az vmss create --resource-group exa --name exav7ncussc${nstr} \
               --location southcentralus \
               --vm-sku "Standard_NC6" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/nc-sc-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-us-sc-64k/subnets/subnet-us-sc-64k \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  eval az vmss create --resource-group exa --name exav7nc2ussc${nstr} \
               --location southcentralus \
               --vm-sku "Standard_NC6s_v2" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/nc-sc-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-us-sc-64k/subnets/subnet-us-sc-64k \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  eval az vmss create --resource-group exa --name exav7nc3ussc${nstr} \
               --location southcentralus \
               --vm-sku "Standard_NC6s_v3" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/nc-sc-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-us-sc-64k/subnets/subnet-us-sc-64k \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  eval az vmss create --resource-group exa --name exav7nvussc${nstr} \
               --location southcentralus \
               --vm-sku "Standard_NV6" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/nc-sc-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-us-sc-64k/subnets/subnet-us-sc-64k \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  eval az vmss create --resource-group exa --name exav7nv3ussc${nstr} \
               --location southcentralus \
               --vm-sku "Standard_NV12s_v3" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/nc-sc-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-us-sc-64k/subnets/subnet-us-sc-64k \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  # northcentralus

  eval az vmss create --resource-group exa --name exav7ncusnc${nstr} \
               --location northcentralus \
               --vm-sku "Standard_NC6" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/us-nc-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-us-nc-64k/subnets/subnet-us-nc-64k \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  eval az vmss create --resource-group exa --name exav7nvusnc${nstr} \
               --location northcentralus \
               --vm-sku "Standard_NV6" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/us-nc-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-us-nc-64k/subnets/subnet-us-nc-64k \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  # westeurope

  eval az vmss create --resource-group exa --name exav7ndeuwest${nstr} \
               --location westeurope \
               --vm-sku "Standard_ND6s" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/eu-west-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-eu-west-64k/subnets/subnet-eu-west-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  eval az vmss create --resource-group exa --name exav7nceuwest${nstr} \
               --location westeurope \
               --vm-sku "Standard_NC6" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/eu-west-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-eu-west-64k/subnets/subnet-eu-west-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0

  eval az vmss create --resource-group exa --name exav7nc2euwest${nstr} \
               --location westeurope \
               --vm-sku "Standard_NC6s_v2" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/eu-west-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-eu-west-64k/subnets/subnet-eu-west-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0

  eval az vmss create --resource-group exa --name exav7nc3euwest${nstr} \
               --location westeurope \
               --vm-sku "Standard_NC6s_v3" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/eu-west-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-eu-west-64k/subnets/subnet-eu-west-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0 

  eval az vmss create --resource-group exa --name exav7nveuwest${nstr} \
               --location westeurope \
               --vm-sku "Standard_NV6" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/eu-west-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-eu-west-64k/subnets/subnet-eu-west-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0

  eval az vmss create --resource-group exa --name exav7nv3euwest${nstr} \
               --location westeurope \
               --vm-sku "Standard_NV12s_v3" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/eu-west-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-eu-west-64k/subnets/subnet-eu-west-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0

  # northeurope

  eval az vmss create --resource-group exa --name exav7nceunorth${nstr} \
               --location northeurope \
               --vm-sku "Standard_NC6" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/eu-north-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-eu-north-64k/subnets/subnet-eu-north-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0 


  eval az vmss create --resource-group exa --name exav7nveunorth${nstr} \
               --location northeurope \
               --vm-sku "Standard_NV6" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/eu-north-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-eu-north-64k/subnets/subnet-eu-north-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0

  eval az vmss create --resource-group exa --name exav7nv3eunorth${nstr} \
               --location northeurope \
               --vm-sku "Standard_NV12s_v3" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/eu-north-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-eu-north-64k/subnets/subnet-eu-north-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0

  # uksouth
  
  eval az vmss create --resource-group exa --name exav7ncuksouth${nstr} \
               --location uksouth \
               --vm-sku "Standard_NC6" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/uk-south-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-uk-south-64k/subnets/subnet-uk-south-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0

  eval az vmss create --resource-group exa --name exav7nc3uksouth${nstr} \
               --location uksouth \
               --vm-sku "Standard_NC6s_v3" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/uk-south-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-uk-south-64k/subnets/subnet-uk-south-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0

  eval az vmss create --resource-group exa --name exav7nvuksouth${nstr} \
               --location uksouth \
               --vm-sku "Standard_NV6" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/uk-south-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-uk-south-64k/subnets/subnet-uk-south-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0

  # apse

  eval az vmss create --resource-group exa --name exav7nc2apse${nstr} \
               --location southeastasia \
               --vm-sku "Standard_NC6s_v2" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/ap-se-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-ap-se-64k/subnets/subnet-ap-se-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  eval az vmss create --resource-group exa --name exav7nc3apse${nstr} \
               --location southeastasia \
               --vm-sku "Standard_NC6s_v3" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/ap-se-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-ap-se-64k/subnets/subnet-ap-se-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0 # no zones


  eval az vmss create --resource-group exa --name exav7nvapse${nstr} \
               --location southeastasia \
               --vm-sku "Standard_NV6" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/ap-se-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-ap-se-64k/subnets/subnet-ap-se-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  eval az vmss create --resource-group exa --name exav7nv3apse${nstr} \
               --location southeastasia \
               --vm-sku "Standard_NV12s_v3" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/ap-se-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-ap-se-64k/subnets/subnet-ap-se-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  eval az vmss create --resource-group exa --name exav7ndapse${nstr} \
               --location southeastasia \
               --vm-sku "Standard_ND6s" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/ap-se-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-ap-se-64k/subnets/subnet-ap-se-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  # australia

  eval az vmss create --resource-group exa --name exav7ncapau${nstr} \
               --location australiaeast \
               --vm-sku "Standard_NC6" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/ap-au-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-ap-au-64k/subnets/subnet-ap-au-64k \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  eval az vmss create --resource-group exa --name exav7nc3apau${nstr} \
               --location australiaeast \
               --vm-sku "Standard_NC6s_v3" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/ap-au-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-ap-au-64k/subnets/subnet-ap-au-64k \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  eval az vmss create --resource-group exa --name exav7nvapau${nstr} \
               --location australiaeast \
               --vm-sku "Standard_NV6" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/ap-au-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-ap-au-64k/subnets/subnet-ap-au-64k \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  eval az vmss create --resource-group exa --name exav7nv3apau${nstr} \
               --location australiaeast \
               --vm-sku "Standard_NV12s_v3" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/ap-au-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-ap-au-64k/subnets/subnet-ap-au-64k \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  # japan
  eval az vmss create --resource-group exa --name exav7nc3apjp${nstr} \
               --location japaneast \
               --vm-sku "Standard_NC6s_v3" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/ap-jp-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-ap-jp-64k/subnets/subnet-ap-jp-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0

  eval az vmss create --resource-group exa --name exav7nvapjp${nstr} \
               --location japaneast \
               --vm-sku "Standard_NV6" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/ap-jp-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-ap-jp-64k/subnets/subnet-ap-jp-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0

  # korea

  az vmss create --resource-group exa --name exav7nc3apko${nstr} \
               --location koreacentral \
               --vm-sku "Standard_NC6s_v3" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/ap-ko-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-ap-ko-64k/subnets/subnet-ap-ko-64k \
                   --admin-username centos --authentication-type ssh --ssh-key-values "${AZ_SSH}" \
                   --priority low --public-ip-per-vm --upgrade-policy-mode manual --lb "" \
                   --disable-overprovision --eviction-policy delete \
                   --assign-identity ${AZ_SUB}.ManagedIdentity/userAssignedIdentities/blob-writer \
                   --image ${AZ_SUB}.Compute/galleries/galery_uswest2/images/wn-wgpu-v7 \
               --instance-count 0 # no zones

  # canada

  eval az vmss create --resource-group exa --name exav7nc3canada${nstr} \
               --location canadacentral \
               --vm-sku "Standard_NC6s_v3" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/canada-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-canada-64k/subnets/subnet-canada-64k \
               ${AZ_STD_ARGS} --instance-count 0 # no zones

  # westus1

  eval az vmss create --resource-group exa --name exav7nvuswest1${nstr} \
               --location westus \
               --vm-sku "Standard_NV12s_v3" \
               --nsg ${AZ_SUB}.Network/networkSecurityGroups/uswest-all \
               --subnet ${AZ_SUB}.Network/virtualNetworks/net-us-west1-64k/subnets/subnet-us-west1-64k \
               --single-placement-group false \
               ${AZ_STD_ARGS} --instance-count 0 # nozones


done
